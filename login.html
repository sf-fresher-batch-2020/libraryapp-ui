<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <!-- <meta http-equiv="X-UA-Compatible" content="ie=edge">-->
  <title>login</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"       crossorigin="anonymous">

    <!-- jQuery and JS bundle w/ Popper.js -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"        
        crossorigin="anonymous"></script>

  <link rel="stylesheet" href="assets/index.css">
  <link rel="stylesheet" href="assets/style.css">

  <script src= "modules/loginservice.js"> </script>
</head>

<body id="background">
  <header id="header">
    <!--header-->
  </header>
  
  <div class="login_main">
    <div class="login_form">
      <div class="card text-center">
        <div class="card-header" id="message">
      <h1>Login</h1>
        </div>
        <div class="card-body">
      <form action="" method="POST">
        <label>Username :</label><input type="text" placeholder="username" id="mail" required><br />
        <label>Password :</label><input type="text" placeholder="password" id="pass" required><br />
        <label>Role :</label>
        <select name="user" id="user" required>
          <option value="">--PLEASE SELECT --</option>
           <option value="borrower">Borrower</option>
           <option value="admin">Admin</option>
       </select>
       <br />
        <button onclick="login()">Sign in</button>
      </form>
      <p style="text-align: center;">If not registered yet,please click here to <a href="register.html" style="text-decoration: underline;">Register</a></p>
        </div>
    </div>
  </div>
  <script>
    $("#header").load("components/_header.html");
    function login(){
            event.preventDefault();
            // Step 1: Get Form Values
            let email = document.querySelector("#mail").value;
            let password = document.querySelector("#pass").value;
            let role = document.querySelector("#user").value;
            //Step 2: Store all form values in a single object, so that it will easy to send 
            let obj = { "email" : email , "password": password , "role": role };
            console.log(obj);
            var loginserviceobj= new LoginService();
             loginserviceobj.login(email,password,role);
            var users = loginserviceobj.login(email,password,role);
            if(users)
            {
              if(role=="admin"){
                window.location.href="admin.html"
              }
              else{
                window.location.href="borrower.html";
              }
      
             
              }
            else
            {
                document.querySelector("#message").innerHTML = "invalid";
                
            }
        }
       
</script>
</body>

</html>